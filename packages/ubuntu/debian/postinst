#!/bin/sh

name="nautilussvn"
version="0.12"
nautilussvn_directory_name="${name}_${version}"
python_nautilus_extensions_path="`pkg-config --variable=pythondir nautilus-python`"
if [ -z "$python_nautilus_extensions_path" ]; then
	# Fallback if pkg-config can't find anything
	python_nautilus_extensions_path="`find /usr/lib/nautilus/ -maxdepth 1 | grep extensions | tail -n 1`/python"
	if [ ! -d "$python_nautilus_extensions_path" ]; then
		mkdir -p "$python_nautilus_extensions_path"
	fi
fi;
nautilussvn_directory="${python_nautilus_extensions_path}/${nautilussvn_directory_name}"

icon_theme_directory="/usr/share/icons/hicolor/"
emblems_directory="${icon_theme_directory}/scalable/emblems/"

ln -s "${nautilussvn_directory}/NautilusSvn.py" "${python_nautilus_extensions_path}/NautilusSvn.py"
gtk-update-icon-cache "$icon_theme_directory"
